<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Relatórios reprodutíveis com R</title>
    <meta charset="utf-8" />
    <script src="index_files/header-attrs/header-attrs.js"></script>
    <script src="index_files/clipboard/clipboard.min.js"></script>
    <link href="index_files/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="index_files/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: title-slide, rascunho, title-slide

# Relatórios reprodutíveis com R
## Curso de Verão IME-USP 2022
### <h3>
Ministrante: <br> Beatriz Milz
</h3>
### <h3>
Monitoria: <br> Ana Carolina Moreno <br> Tereza Lacerda <br> Alan da Silva <br> Julia Cansado
</h3>

---












## Ministrantes e monitoria

- **Beatriz Milz** - Doutoranda em Ciência Ambiental na
  Universidade de São Paulo (PROCAM/IEE/USP). &lt;br&gt;
  - &lt;a href='https://education.rstudio.com/trainers/people/milz+beatriz/'&gt;Instrutora de tidyverse certificada pela RStudio&lt;/a&gt;.&lt;br&gt;
  - Co-organizadora da &lt;a href='https://linktr.ee/rladies_sp'&gt;R-Ladies SP&lt;/a&gt;, uma comunidade que tem como
  objetivo promover a diversidade de gênero na comunidade da linguagem R. &lt;br&gt; &lt;br&gt;&lt;br&gt;
- **Ana Carolina Moreno** - Jornalista de dados, focada atualmente na cobertura da pandemia com análises de dados usando R. &lt;br&gt;
  - Participa da &lt;a href='https://linktr.ee/rladies_sp'&gt;R-Ladies SP&lt;/a&gt; desde janeiro de 2019. &lt;br&gt;&lt;br&gt;
- **Tereza Lacerda** - Estudante de Estatística na Universidade de São Paulo (IME/USP) &lt;br&gt;
 - Estagiária na &lt;a href='https://curso-r.com/'&gt;Curso-R&lt;/a&gt; &lt;br&gt;
 - Interessada em Análise de Dados Musicais &lt;br&gt;&lt;br&gt;

---

## Ministrantes e monitoria


- **Alan da Silva** - Doutorando em Estatística pela Universidade de São Paulo (IME/USP) &lt;br&gt;
 - Participou da manutenção/atualizações do pacote &lt;a href='https://ipeagit.github.io/geobr/'&gt;geobr&lt;/a&gt;, um pacote R que tem como objetivo facilitar o acesso de base de dados espaciais oficiais do Brasil. &lt;br&gt;&lt;br&gt;
- **Julia Cansado** - Estudante de Arquitetura e Urbanismo na Universidade de São Paulo (FAU/USP) &lt;br&gt;
 - Estagiária no Laboratório Quapá / Projeto Mapbiomas &lt;br&gt;&lt;br&gt;

---

## Curso sobre R no Programa de Verão IME/USP

- De 2015 à 2017, um grupo de alunos do IME/USP ofereceu um curso sobre R que apresentava temas de introdutórios até intermediário/avançado. 
  - Material de 2016: https://curso-r.github.io/verao2016/
  - Material de 2017: https://curso-r.github.io/verao2017/
  - Em 2018 este grupo criou a Curso-R: https://curso-r.com/


- Nathália Demétrio começou a ministrar  o curso de 'Introdução à Programação em R'.

- Em 2022, os cursos de 'Princípios de Visualização de Dados com R' e 'Relatórios Reprodutíveis com R' foram adicionados ao Programa de Verão IME/USP.

---

.pull-left[

## R-Ladies


- R-Ladies é uma organização mundial cuja missão é promover a diversidade de gênero na comunidade da linguagem R.



- Público-alvo são as pessoas que se identificam com gêneros sub-representados na comunidade R, portanto: mulheres cis, mulheres trans, homens trans, pessoas não-binárias e queer.

- Links: https://linktr.ee/rladies_sp


]

.pull-right[

&lt;br&gt;

&lt;center&gt;&lt;img src= 'https://beatrizmilz.github.io/slidesR/rladies/img/allisonhorst/community1.jpg' width = '90%' alt='Author: Allison Horst'&gt;&lt;/br&gt;&lt;p&gt;Ilustração por &lt;a href='https://twitter.com/allison_horst' target=_blank&gt;@allison_horst&lt;/a&gt;&lt;/p&gt;&lt;/center&gt;



]




---
name: sumario

## Guia

- [Sobre o curso](#sobre-o-curso)

- [Introdução ao conceito de reprodutibilidade](#reprodutibilidade)


- [RMarkdown](#rmarkdown)

- [Git e GitHub](#git-e-github)


---
name: sobre-o-curso
class: middle, center, inverse

## Sobre o curso

---

### Objetivos de aprendizagem

Que vocês saibam ao final do curso:

- Noções de reprodutibilidade

- Como criar documentos usando RMarkdown.

- Como exportar esses documentos em word, PDF e HTML.

- Como controlar as versões do documento usando o Git e GitHub.

- Como disponibilizar o documento na internet. 

---

### Dinâminca de aula

- São 5 aulas: 

  - Aulas 1 e 2: conceito de reprodutibilidade, usar projetos em R e introdução ao pacote RMarkdown.
  
  - Aulas 3 e 4: introdução ao Git e GitHub no RStudio.
  
  - Aula 5: exemplo para praticar os conteúdos das aulas anteriores.
  

- Pratique depois da aula! Dica: [Podcast Naruhodo: Powerpoint é útil para a aprendizagem?](https://www.b9.com.br/shows/naruhodo/naruhodo-205-powerpoint-e-util-para-a-aprendizagem/)

---

### Informações gerais

- Gravação das aulas: caso não queira aparecer na gravação, mantenha sua câmera fechada.

- Dúvidas:

  - Durante as aulas: enviem dúvidas no chat.

  - Fora do horário de aulas:
      - Durante o oferecimento do curso: [na plataforma USP Extensão](https://cursosextensao.usp.br/)
      - Após a finalização do curso: [Fórum da Curso-R](https://discourse.curso-r.com/)


---

### Requisitos para o certificado

- Ter frequência igual ou superior à 75% (ou seja, pode ter 1 falta).

- [TO DO: preencher depois sobre os exercícios e trabalho final]



---

### Check-list


- Instalar:
  - [R](https://livro.curso-r.com/1-1-instalacao-do-r.html)
  - [RStudio](https://livro.curso-r.com/1-1-instalacao-do-r.html) 
  - [Git](https://git-scm.com/)

- [Criar uma conta no GitHub](https://github.com/)

---

### Check-list de pacotes

- Instalar pacotes necessários:

```r
pacotes_necessarios &lt;- c("usethis",
                         "rmarkdown",
                         "knitr",
                         "pagedown",
                         "xaringan",
                         "readr")

install.packages(pacotes_necessarios)
```


---

### Guia dos slides

- As cores da linha vertical indicam o tipo de conteúdo dos slides!

  - Cinza: conteúdo teórico, expositivo.
  
  - Azul: demonstração, mostraremos como é feito no RStudio.
  
  - Amarelo: vocês fazem exercícios para praticar o que foi apresentado.
  
  - Coral: pontos principais para revisão teórica.

---
name: reprodutibilidade
class: middle, center, inverse

## Introdução ao conceito de reprodutibilidade

.left[
- O que vamos aprender:

  - O que é reprodutibilidade?

  - O que são projetos no RStudio, e qual é a importância de usá-los? 

  - O que são caminhos relativos e absolutos?

  - Como desabilitar a funcionalidade do RStudio que armazena automaticamente os objetos e o histórico?
]

---
class: teoria

.pull-left[
### Reprodutibilidade

- "É um conceito que não tem uma definição única e comum". [(Gundersen, 2021)](https://doi.org/10.1098/rsta.2020.0210)

- "Para alguém fazer uma afirmação científica legítima, ele deve ser capaz de reproduzir totalmente seus resultados a partir de seus dados brutos (e de preferência outros devem ser capazes de reproduzi-los também)". [Dr. John Paul Helveston](https://jhelvy.github.io/r4aPrimer/L6-reproducible-reporting.html)

 
]

--

.pull-right[

Quais fatores contribuem com  pesquisa não reprodutível? Fonte: &lt;a href='https://doi.org/10.1038/533452a'&gt;Baker (2016)&lt;/a&gt;

&lt;img src="img/irreproducible.png" width="100%" style="display: block; margin: auto;" /&gt;


]



---
class: teoria

.pull-left[

### Reprodutibilidade


&gt; “Reprodutibilidade é como escovar os dentes. Isso é bom para você, mas leva tempo e esforço. Depois de aprender, torna-se um hábito.” - Irakli Loladze, Bryan College of Health Sciences em Lincoln, Nebraska.  
  &gt; .small[Baker, M. 1,500 scientists lift the lid on reproducibility. Nature 533, 452–454 (2016). https://doi.org/10.1038/533452a]

]

--

.pull-right[
- Exemplos:

  - Boas práticas, como: não usar caracteres especiais nos caminhos, variáveis, nomes de coluna, etc; armazenar os arquivos de forma consistente.

  - Registrar a versão do R e dos pacotes utilizados
  
  - Documentar a análise
  
  - Controlar a versão dos arquivos
]

???

Outras referências interessantes:

- [Introduction to bioinformatics -  Chapter 8 Reproducible research, - Laurent Gatto](https://uclouvain-cbio.github.io/WSBIM1207/sec-rr.html)



---
class:  teoria

### Projetos do RStudio

.pull-left[

- O RStudio permite a criação de Projetos.


- O projeto é uma pasta no computador, onde devemos armazenar todos os arquivos usados ou criados em uma análise. Essa pasta irá conter também um arquivo com o nome do projeto e a extensão `.Rproj`.

- Para cada análise, lembre-se de criar um `.Rproj` correspondente.



]

.pull-right[

- Usar projetos no RStudio facilita a organização dos arquivos, posteriormente sincronizar com o GitHub, entre outros.

&lt;img src="img/rprojs.png" width="50%" style="display: block; margin: auto;" /&gt;

]


---
class: livecoding

### Criando um projeto

- Criando um projeto em uma nova pasta:

  - File &gt; New Project &gt; New Directory &gt; New Project
  
  - Dê um nome para seu projeto (será o nome da pasta), escolha a pasta no seu computador, e clique em `Create Project`.
  
  
---
class:  teoria

### Diretório de trabalho/Working Directory

- O diretório de trabalho é a pasta em que o R irá:
  - procurar arquivos na hora de ler informações;
  - gravar arquivos na hora de salvar objetos.


- Quando usamos Projetos do RStudio, o nosso diretório de trabalho é a pasta principal do projeto. 

- A função `getwd()` serve para conferir o diretório de trabalho: 

```r
&gt; getwd()
[1] "/Users/beatrizmilz/GitHub/2022-curso-de-verao-ime-usp-relatorios"
```

- A função `setwd()` serve para alterar o diretório de trabalho. **NÃO É RECOMENDADO O USO! Isso torna o código não reprodutível.**

  
---
class:  teoria

### Caminhos

- Caminhos são textos que representam o endereço do arquivo no computador. 

- É muito importante entender como funcionam! Caso contrário, ficará difícil fazer coisas como importar dados para o R.

- Caminhos podem ser relativos ou absolutos.

- Caminhos absolutos: tem início na pasta raiz do seu computador/usuário. **NÃO É RECOMENDADO O USO! Isso torna o código não reprodutível.**

- Caminhos relativos: tem início no diretório de trabalho da sessão. Caso você esteja usando projetos, os caminhos relativos tem início na pasta inicial do projeto. 


- **Utilize sempre que possível caminhos relativos.**

---
class:  teoria

### Exemplos de caminhos

Exemplos acessando o mesmo arquivo:

- Caminho absoluto:
```
"/Users/beatrizmilz/GitHub/2022-curso-de-verao-ime-usp-relatorios/docs/slides/img/rprojs.png"
```

- Caminho relativo:
```
"docs/slides/img/rprojs.png"
```


???
O pacote `here` também possui funções úteis para escrever caminhos: 


```r
here::here()
```

```
## [1] "/Users/beatrizmilz/GitHub/2022-curso-de-verao-ime-usp-relatorios"
```

---
class:  teoria

### Os arquivos .RData e .Rhistory 

- Em sua configuração padrão, a IDE manterá na "memória" todos os últimos comandos executados, todos os dados utilizados e todos os objetos criados.

- Ao fechar e abrir o RStudio, essas informações serão recarregadas na memória como se o usuário nunca tivesse saído do programa. Esse recurso é tornado possível pela criação de dois arquivos ocultos: `.RData` e `.Rhistory`.

- O primeiro abriga absolutamente todos os objetos criados por uma sessão R, enquanto o segundo contém uma lista com os últimos comandos executados. 

- Ao reabrir o RStudio, o conteúdo armazenados nestes arquivos será carregado no ambiente de trabalho atual como se nada tivesse acontecido.

.footnote[Leia mais [neste capítulo do livro Zen do R](https://curso-r.github.io/zen-do-r/rdata-rhistory.html)]


.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]


---
class:  teoria


### Por que desistir do .RData e .Rhistory 

- Se todos os resultados parciais de uma análise estiverem disponíveis a qualquer momento, **diminui o incentivo para a escrita de código reprodutível**

- Ao dependermos ativamente do `.Rdata`, **se acidentalmente sobrescrevemos um objeto** relevante e o código para recriá-lo não estiver mais acessível, **não haverá nenhuma forma confiável de recuperá-lo**.

- O R trata todos os objetos guardados na memória igualmente. Isso significa que ele também irá armazenar nos arquivos ocultos todas as bases de dados da sessão. Assim, o `.RData` **pode ser um arquivo de múltiplos gigabytes**

.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]


---
class:  livecoding

### Como desabilitar .RData e .Rhistory

- Na barra superior: **Tools &gt; Global Options...**

&lt;img src="https://curso-r.github.io/zen-do-r/static/rdata-rhistory/config.png" width="40%" style="display: block; margin: auto;" /&gt;

.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]

---
class: exercicios

### Colocar em prática

1) Crie um projeto no RStudio para armazenar o que vamos criar durante o curso. Salve em algum lugar no seu computador que seja fácil de encontrar.

2) Desabilite o .RData e .Rhistory no seu RStudio

3) Execute o seguinte código no console, verifique o resultado: `devtools::session_info()`

4) Dentro do projeto criado, crie uma pasta chamada "dados", e salve o seguinte arquivo na mesma: [clique aqui para baixar o arquivo `pinguins.csv`](https://beatrizmilz.github.io/2022-curso-de-verao-ime-usp-relatorios/dados/pinguins.csv)

Dados originais: https://allisonhorst.github.io/palmerpenguins/

Dados traduzidos para Português: https://cienciadedatos.github.io/dados/

---
class: exercicios

### Colocar em prática: Continuação

5) Crie um R Script, copie e cole o código abaixo, e substitua o caminho correto para ler a base de pinguins. Aproveite que o RStudio nos ajuda a buscar caminhos: dentro das aspas, experimente clicar a tecla TAB.

```r
caminho &lt;- "...." 
pinguins &lt;- readr::read_csv(caminho)
```
6) Verifique no painel Environment do RStudio se a base de Pinguins foi importada corretamente.


---
class: livecoding

- Exemplo do Session Info

.smaller[

```r
devtools::session_info()
```

```
## ─ Session info ────────────────────────────────────────────────────────────
##  setting  value
##  version  R version 4.1.0 (2021-05-18)
##  os       macOS Big Sur 11.5.2
##  system   x86_64, darwin17.0
##  ui       RStudio
##  language (EN)
##  collate  en_US.UTF-8
##  ctype    en_US.UTF-8
##  tz       America/Sao_Paulo
##  date     2022-01-25
##  rstudio  2021.09.0+351 Ghost Orchid (desktop)
##  pandoc   2.14.0.3 @ /Applications/RStudio.app/Contents/MacOS/pandoc/ (via rmarkdown)
## 
## ─ Packages ────────────────────────────────────────────────────────────────
##  package        * version    date (UTC) lib source
##  AmesHousing      0.0.4      2020-06-23 [1] CRAN (R 4.1.0)
##  assertthat       0.2.1      2019-03-21 [1] CRAN (R 4.1.0)
##  babynames        1.0.1      2021-04-12 [1] CRAN (R 4.1.0)
##  bit              4.0.4      2020-08-04 [1] CRAN (R 4.1.0)
##  bit64            4.0.5      2020-08-30 [1] CRAN (R 4.1.0)
##  bslib            0.3.1      2021-10-06 [1] CRAN (R 4.1.0)
##  cachem           1.0.6      2021-08-19 [1] CRAN (R 4.1.0)
##  callr            3.7.0      2021-04-20 [1] CRAN (R 4.1.0)
##  cellranger       1.1.0      2016-07-27 [1] CRAN (R 4.1.0)
##  cli              3.1.1      2022-01-20 [1] CRAN (R 4.1.2)
##  colorspace       2.0-2      2021-06-24 [1] CRAN (R 4.1.0)
##  crayon           1.4.2      2021-10-29 [1] CRAN (R 4.1.0)
##  dados            0.0.0.9000 2021-10-25 [1] Github (cienciadedatos/dados@0aac90a)
##  DBI              1.1.2      2021-12-20 [1] CRAN (R 4.1.0)
##  desc             1.4.0      2021-09-28 [1] CRAN (R 4.1.0)
##  devtools       * 2.4.3      2021-11-30 [1] CRAN (R 4.1.0)
##  digest           0.6.29     2021-12-01 [1] CRAN (R 4.1.0)
##  dplyr            1.0.7      2021-06-18 [1] CRAN (R 4.1.0)
##  ellipsis         0.3.2      2021-04-29 [1] CRAN (R 4.1.0)
##  emo              0.0.0.9000 2021-08-12 [1] Github (hadley/emo@3f03b11)
##  evaluate         0.14       2019-05-28 [1] CRAN (R 4.1.0)
##  fansi            1.0.2      2022-01-14 [1] CRAN (R 4.1.2)
##  farver           2.1.0      2021-02-28 [1] CRAN (R 4.1.0)
##  fastmap          1.1.0      2021-01-25 [1] CRAN (R 4.1.0)
##  forcats          0.5.1      2021-01-27 [1] CRAN (R 4.1.0)
##  fs               1.5.2      2021-12-08 [1] CRAN (R 4.1.0)
##  fueleconomy      1.0.0      2020-03-23 [1] CRAN (R 4.1.0)
##  gapminder        0.3.0      2017-10-31 [1] CRAN (R 4.1.0)
##  gargle           1.2.0      2021-07-02 [1] CRAN (R 4.1.0)
##  generics         0.1.1      2021-10-25 [1] CRAN (R 4.1.0)
##  ggplot2        * 3.3.5      2021-06-25 [1] CRAN (R 4.1.0)
##  glue             1.6.1      2022-01-22 [1] CRAN (R 4.1.0)
##  googledrive      2.0.0      2021-07-08 [1] CRAN (R 4.1.0)
##  googlesheets4    1.0.0      2021-07-21 [1] CRAN (R 4.1.0)
##  gtable           0.3.0      2019-03-25 [1] CRAN (R 4.1.0)
##  here             1.0.1      2020-12-13 [1] CRAN (R 4.1.0)
##  highr            0.9        2021-04-16 [1] CRAN (R 4.1.0)
##  hms              1.1.1      2021-09-26 [1] CRAN (R 4.1.0)
##  htmltools        0.5.2      2021-08-25 [1] CRAN (R 4.1.0)
##  jquerylib        0.1.4      2021-04-26 [1] CRAN (R 4.1.0)
##  jsonlite         1.7.3      2022-01-17 [1] CRAN (R 4.1.0)
##  knitr            1.37       2021-12-16 [1] CRAN (R 4.1.0)
##  labeling         0.4.2      2020-10-20 [1] CRAN (R 4.1.0)
##  Lahman           9.0-0      2021-04-09 [1] CRAN (R 4.1.0)
##  lifecycle        1.0.1      2021-09-24 [1] CRAN (R 4.1.0)
##  lubridate        1.8.0      2021-10-07 [1] CRAN (R 4.1.0)
##  magrittr         2.0.1      2020-11-17 [1] CRAN (R 4.1.0)
##  memoise          2.0.1      2021-11-26 [1] CRAN (R 4.1.0)
##  metathis         1.1.1      2021-06-29 [1] CRAN (R 4.1.0)
##  munsell          0.5.0      2018-06-12 [1] CRAN (R 4.1.0)
##  nasaweather      0.1        2014-07-22 [1] CRAN (R 4.1.0)
##  nycflights13     1.0.2      2021-04-12 [1] CRAN (R 4.1.0)
##  palmerpenguins   0.1.0      2020-07-23 [1] CRAN (R 4.1.0)
##  pillar           1.6.4      2021-10-18 [1] CRAN (R 4.1.0)
##  pixarfilms       0.2.1      2021-07-27 [1] CRAN (R 4.1.0)
##  pkgbuild         1.3.1      2021-12-20 [1] CRAN (R 4.1.0)
##  pkgconfig        2.0.3      2019-09-22 [1] CRAN (R 4.1.0)
##  pkgload          1.2.4      2021-11-30 [1] CRAN (R 4.1.0)
##  prettyunits      1.1.1      2020-01-24 [1] CRAN (R 4.1.0)
##  processx         3.5.2      2021-04-30 [1] CRAN (R 4.1.0)
##  ps               1.6.0      2021-02-28 [1] CRAN (R 4.1.0)
##  purrr            0.3.4      2020-04-17 [1] CRAN (R 4.1.0)
##  R6               2.5.1      2021-08-19 [1] CRAN (R 4.1.0)
##  readr            2.1.1      2021-11-30 [1] CRAN (R 4.1.0)
##  remotes          2.4.2      2021-11-30 [1] CRAN (R 4.1.0)
##  rlang            0.4.12     2021-10-18 [1] CRAN (R 4.1.0)
##  rmarkdown        2.11       2021-09-14 [1] CRAN (R 4.1.0)
##  rprojroot        2.0.2      2020-11-15 [1] CRAN (R 4.1.0)
##  rsconnect        0.8.25     2021-11-19 [1] CRAN (R 4.1.0)
##  rstudioapi       0.13       2020-11-12 [1] CRAN (R 4.1.0)
##  sass             0.4.0      2021-05-12 [1] CRAN (R 4.1.0)
##  scales           1.1.1      2020-05-11 [1] CRAN (R 4.1.0)
##  sessioninfo      1.2.2      2021-12-06 [1] CRAN (R 4.1.0)
##  showtext         0.9-4      2021-08-14 [1] CRAN (R 4.1.0)
##  showtextdb       3.0        2020-06-04 [1] CRAN (R 4.1.0)
##  stringi          1.7.6      2021-11-29 [1] CRAN (R 4.1.0)
##  stringr          1.4.0      2019-02-10 [1] CRAN (R 4.1.0)
##  sysfonts         0.8.5      2021-08-09 [1] CRAN (R 4.1.0)
##  testthat         3.1.1      2021-12-03 [1] CRAN (R 4.1.0)
##  tibble           3.1.6      2021-11-07 [1] CRAN (R 4.1.0)
##  tidyr            1.1.4      2021-09-27 [1] CRAN (R 4.1.0)
##  tidyselect       1.1.1      2021-04-30 [1] CRAN (R 4.1.0)
##  tzdb             0.2.0      2021-10-27 [1] CRAN (R 4.1.0)
##  usethis        * 2.1.5      2021-12-09 [1] CRAN (R 4.1.0)
##  utf8             1.2.2      2021-07-24 [1] CRAN (R 4.1.0)
##  uuid             1.0-3      2021-11-01 [1] CRAN (R 4.1.0)
##  vctrs            0.3.8      2021-04-29 [1] CRAN (R 4.1.0)
##  vroom            1.5.7      2021-11-30 [1] CRAN (R 4.1.0)
##  whisker          0.4        2019-08-28 [1] CRAN (R 4.1.0)
##  withr            2.4.3      2021-11-30 [1] CRAN (R 4.1.0)
##  xaringan         0.22       2021-06-23 [1] CRAN (R 4.1.0)
##  xaringanExtra    0.5.4      2021-08-12 [1] Github (gadenbuie/xaringanExtra@5e2d80b)
##  xaringanthemer * 0.4.1      2021-11-21 [1] CRAN (R 4.1.0)
##  xfun             0.29       2021-12-14 [1] CRAN (R 4.1.0)
##  yaml             2.2.1      2020-02-01 [1] CRAN (R 4.1.0)
## 
##  [1] /Library/Frameworks/R.framework/Versions/4.1/Resources/library
## 
## ───────────────────────────────────────────────────────────────────────────
```
]

---
class: revisao

### Revisão - Reprodutibilidade

- Em um código reprodutível, devemos ser capazes de reproduzir totalmente os resultados a partir dos dados brutos, assim como outras pessoas (em computadores diferentes) também devem ser capazes de reproduzir esses mesmos resultados a partir dos dados brutos.

- Utilizar boas práticas aumentam as chances de escrever um código reprodutível. 
- Exemplos de boas práticas:

  - Utilizar Projetos do RStudio. Quando usamos projetos do RStudio, o diretório de trabalho será a pasta principal do projeto.

  - Desabilitar o .Rhistory e .Rdata.

  - Utilizar caminhos relativos.

---
name: rmarkdown
class: middle, center, inverse

## RMarkdown

.left[
- O que vamos aprender:

  - O que é o pacote rmarkdown?

  - Qual é a estrutura de um arquivo rmarkdown?
  
  - O que é Markdown?
  
  - Como adicionar conteúdo em um arquivo rmarkdown?

  - Como gerar outros tipos de documentos?
  
  - Como adicionar parâmetros no documento?
  


]

---
class:  teoria


### Ciclo da ciência de dados


&lt;img src="https://beatrizmilz.github.io/python-brasil-2021-reticulate/img/environmental-data-science-r4ds-general.png" width="65%" style="display: block; margin: auto;" /&gt;


Fonte: Conceito do ciclo de ciência de dados apresentado por [Hadley Wickham no livro R for Data Science](https://r4ds.had.co.nz/introduction.html), ilustração por [Allison Horst](https://github.com/allisonhorst).

---
class:  teoria


### Pacote R Markdown

.pull-left[



- Criado e mantido pela [RStudio](https://rstudio.com/)

- Princípio: arquivos onde escrevemos textos e marcamos com `markdown`, mas também podemos adicionar códigos que são executados.

- Extensão `.Rmd`

- Possibilita a utilização de códigos `R`, `Python`, `Markdown`, `HTML`, `CSS`, `SQL`, e outros em um único arquivo.

]

.pull-right[
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="https://beatrizmilz.github.io/python-brasil-2021-reticulate/img/hex-rmarkdown.png" alt="&amp;lt;center&amp;gt;&amp;lt;b&amp;gt;Logo: &amp;lt;a href='https://rmarkdown.rstudio.com'&amp;gt;Pacote rmarkdown&amp;lt;/a&amp;gt;&amp;lt;/b&amp;gt;&amp;lt;/center&amp;gt;" width="70%" /&gt;
&lt;p class="caption"&gt;&lt;center&gt;&lt;b&gt;Logo: &lt;a href='https://rmarkdown.rstudio.com'&gt;Pacote rmarkdown&lt;/a&gt;&lt;/b&gt;&lt;/center&gt;&lt;/p&gt;
&lt;/div&gt;
]

---
class:  teoria


### Pacote R Markdown


.pull-left[
- A reprodutibilidade é algo importante para o R Markdown.

-  A comunidade de R, e a equipe da RStudio, desenvolveram outros pacotes que integram bem com R Markdown para  gerar diversos produtos de análise de dados diferentes, com arquivos .Rmd. 

]

.pull-right[
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="https://beatrizmilz.github.io/slidesR/img/rmarkdown/markdown.png" alt="&amp;lt;center&amp;gt;&amp;lt;b&amp;gt;Fonte: &amp;lt;a href='https://rmarkdown.rstudio.com'&amp;gt;Pacote `rmarkdown`&amp;lt;/a&amp;gt;&amp;lt;/b&amp;gt;&amp;lt;/center&amp;gt;" width="70%" /&gt;
&lt;p class="caption"&gt;&lt;center&gt;&lt;b&gt;Fonte: &lt;a href='https://rmarkdown.rstudio.com'&gt;Pacote `rmarkdown`&lt;/a&gt;&lt;/b&gt;&lt;/center&gt;&lt;/p&gt;
&lt;/div&gt;
]


---
class:  livecoding


### Começando com o R Markdown 

- **Criando um arquivo**:

  - `File &gt; New File &gt; R Markdown`

- **Estrutura do arquivo**: 

  - YAML - metadados do documento
  - Code chunks - Campos de código (pode receber código em R, SQL, Python, entre outros)
  - Textos marcados com Markdown ou HTML

- **Transformar o .Rmd no arquivo final**
  - Botão Knit, ou usando o atalho: `Ctrl + Shift + K`
  - Boa prática: faça isso com frequência. 
  
---
class: exercicios

### Colocar em prática: 
  
- Dentro do projeto do RStudio criado, crie um novo arquivo RMarkdown que gera um HTML. 

- O arquivo já vem com alguns conteúdos para servir de exemplo. Observe a estrutura deste arquivo! Tente imaginar o que será gerado.

- Aperte o botão `knit` para gerar o resultado final. Veja o resultado: é o que você imaginou?

- Faça pequenas alterações e aperte o botão `knit` novamente, para ver como ficou. Sugestões:
  - Altere o título, adicione seu nome, mude a data.
  - Escreva algo diferente no corpo do arquivo.
  

---
class:  teoria


### Markdown

- O RMarkdown possibilita a utilização da linguagem de marcação simples Markdown. Essa linguagem de marcação foi elaborada para ser fácil de ler e  fácil de escrever.

* Confira as cheatsheets: [`rmarkdown` Cheatsheet 2.0](http://www.rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf) e [`rmarkdown` Cheatsheet](https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf).


- O RStudio Visual Editor facilita o uso do Markdown no RStudio.

---
class: livecoding

### Markdown

.pull-left[
- Negrito, itálico, tachado

- Criar títulos

- Listas
  - Enumerada
  - Não enumerada
]

.pull-right[
- Marcar como código

- Marcar como citação

- Links

- Imagens
]


---
class:  teoria

### Chunks de Código em R

- Os chunks são campos onde podemos inserir código de R (ou Python, SQL,  Bash...) em um arquivo RMarkdown. 

- Existe um atalho do teclado para criar chunks no RStudio:  `Ctrl + ALt + I`. 

- Também é possível criar um chunk clicando no seguinte botão do RStudio:


&lt;img src="img/create-chunk.png" width="90%" style="display: block; margin: auto;" /&gt;

---

class:  teoria

#### Exemplo:



```r
summary(dplyr::starwars[1:4])
```

```
##      name               height           mass          hair_color       
##  Length:87          Min.   : 66.0   Min.   :  15.00   Length:87         
##  Class :character   1st Qu.:167.0   1st Qu.:  55.60   Class :character  
##  Mode  :character   Median :180.0   Median :  79.00   Mode  :character  
##                     Mean   :174.4   Mean   :  97.31                     
##                     3rd Qu.:191.0   3rd Qu.:  84.50                     
##                     Max.   :264.0   Max.   :1358.00                     
##                     NA's   :6       NA's   :28
```

---
class:  teoria

#### Exemplo:

.left-code[

```r
library(ggplot2)
ggplot(mtcars) +
  aes(x = hp,
      y = mpg,
      colour = cyl) +
  geom_point(size = 2L)
```
]

.right-plot[
![](index_files/figure-html/plot-exemplo-ggplot2-1.png)
]


---
class:  teoria

### Opções de Chunk

- Há uma variedade de opções de chunk que podem afetar como os chunks de código são compilados. Exemplos: 

- `echo=FALSE`- evita que o próprio código apareça

- `eval=FALSE` - mostra o código, mas ele não é executado

- `warning=FALSE` e `message=FALSE` - oculta mensagens de avisos produzidas

- `out.width` - controla o a largura das figuras, gráficos, tabelas geradas (Ex: out.width = "100%")

- Ex de configuração do chunk: `{r, warning=FALSE, message=FALSE}`


---
class:  teoria

### Códigos em R - Opções de chunk

.pull-left[
#### Código + Resultado
- `echo=TRUE`

```r
nrow(mtcars)
```

```
## [1] 32
```
]

.pull-right[

#### Apenas código
- `echo=TRUE, eval=FALSE`

```r
nrow(mtcars)
```

#### Apenas resultado
- `echo=FALSE`

```
## [1] 32
```

]


---
class:  teoria

### Código inline

- É útil para adicionar resultados de código em R dentro de parágrafos.


**Exemplo:**

A base mtcars possui 32 carros.
As colunas presentes na base são 
mpg, cyl, disp, hp, drat, wt, qsec, vs, am, gear, e carb.

**Código Markdown:**



```r
A base mtcars possui `r nrow(mtcars)` carros.
As colunas presentes na base são 
`r knitr::combine_words(names(mtcars), and = "e ")`.
```




---
class:  teoria

### Opções globais de Chunk

As opções globais de chunk são opções de chunk que são válidas para o documento inteiro. Algumas opções são úteis, como `fig.align = "center"`.
Para configurar as opções globais de chunk, modifique o código abaixo e insira após o código `YAML` (retire os `#` no início de cada linha):

- Ex:
  - Configurações do chunk:
`{r setup, include=FALSE}`
  - Conteúdo do chunk:
`knitr::opts_chunk$set(...)`



---
class:  teoria

### Adicionando imagens usando o knitr

.pull-left[
- Função: `knitr::include_graphics()`

-  Opções de Chunk: 

  - `out.width = "30%"` - Largura da imagem

  - `fig.align = 'center'`  - Alinhamento da imagem

  - `fig.cap="Logo R"` - Legenda da imagem 
]

.pull-right[

Exemplo:


&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="https://www.r-project.org/Rlogo.png" alt="Logo R" width="30%" /&gt;
&lt;p class="caption"&gt;Logo R&lt;/p&gt;
&lt;/div&gt;

Sugestão de leitura: [Opções do knitr](https://yihui.name/knitr/options/#chunk-options)


]


---
class:  teoria

### Tabelas com R


```r
knitr::kable(x = head(dplyr::starwars[1:6]), format = "html")
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; name &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; height &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; mass &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; hair_color &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; skin_color &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; eye_color &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Luke Skywalker &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 172 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 77 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; blond &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; fair &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; blue &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; C-3PO &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 167 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; gold &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; yellow &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; R2-D2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 96 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 32 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; white, blue &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; red &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Darth Vader &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 202 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 136 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; none &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; white &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; yellow &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Leia Organa &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 150 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 49 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; brown &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; light &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; brown &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Owen Lars &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 178 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 120 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; brown, grey &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; light &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; blue &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

- Outra opção:  `DT::datatable(dplyr::starwars)`  



---
class:  teoria

### Erros!

- Boa prática: compilar com frequência. 

- É bem comum dar erro ao compilar o arquivo pois **qualquer** código errado causa isso. Algumas coisas pra se observar:

  - **YAML header** - se algo estiver errado, vai dar erro ao compilar. 
Muito cuidado com a identação!

  - **Código nos chunks** - teste o _Run All Chunks_ e veja se aparece erro em algum chunk específico.
Se descobrir, tente verificar o que há de errado no código (pode ser a falta de um parênteses, vírgula, entre outros).

  - Todos os objetos e pacotes usados no seu script precisam estar disponíveis no seu `.Rmd`. Verifique isso :)

---
class: livecoding

### Gerando outros tipos de arquivos

- Alterando o output no YAML. Ex:

  - Word: `output: word_document`

  - HTML: `output: html_document`  
  
- Gerando PDFs a partir de HTML:

  - Usando a função `pagedown::chrome_print("caminho/ate/arquivo.html")`
  
  - Adicionando a linha no YAML: 
  `knit: pagedown::chrome_print`
  
---
class: livecoding

### Templates de R Markdown

.pull-left[

  -  Pacotes também oferecem templates (`File &gt; New File &gt; R Markdown &gt; From template`).
  
  - Os templates disponíveis dependem dos pacotes instalados.
  
]

.pull-right[  
&lt;img src="img/rmd-from-template.png" width="90%" style="display: block; margin: auto;" /&gt;
]

---
class: teoria
### Exemplos

.small[

|Pacote                                           |O que podemos fazer?                      |Exemplos                                                                                                                                                                                          |
|:------------------------------------------------|:-----------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|[blogdown](https://bookdown.org/yihui/blogdown/) |Blogs e sites                             |- [Site da Curso-R](https://curso-r.com/) &lt;br&gt; - [Site da Associação Brasileira de Jurimetria (ABJ)](https://abj.org.br/)                                                                         |
|[distill](https://rstudio.github.io/distill/)    |Blogs e sites                             |- [RStudio AI Blog](https://blogs.rstudio.com/ai/) &lt;br&gt; - [Laboratório da Associação Brasileira de Jurimetria (ABJ)](https://lab.abj.org.br/)                                                     |
|[bookdown](https://bookdown.org/)                |Livros                                    |- [Livro Ciência de Dados em R](https://livro.curso-r.com/) &lt;br&gt; - [R for Data Science](https://r4ds.had.co.nz/)                                                                                  |
|[xaringan](https://github.com/yihui/xaringan)    |Apresentações                             |- Essa apresentação &lt;br&gt; - [Build Your Own Universe - Garrick Aden-Buie &amp; Travis Gerke](https://www.garrickadenbuie.com/talk/build-your-own-universe/)                                            |
|[pagedown](https://github.com/rstudio/pagedown)  |Currículos, cartas e trabalhos acadêmicos |- [Relatório do Observatório da Insolvência](https://abjur.github.io/obsFase2/relatorio/obs_recuperacoes_abj.pdf) &lt;br&gt;  - [Meu currículo](https://beatrizmilz.github.io/resume/index.html)        |
|[learnr](https://rstudio.github.io/learnr/)      |Tutoriais interativos                     |- [Text mining with tidy data principles](https://juliasilge.shinyapps.io/learntidytext/) &lt;br&gt; - [Teacups, Giraffes,  &amp; Statistics](https://tinystats.github.io/teacups-giraffes-and-statistics/) |
]

.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; Slide adaptado do curso de [Relatórios](https://loja.curso-r.com/relatorios-e-apresentacoes-automaticas.html), da [Curso-R](https://curso-r.com/).]


---
class: teoria

### Parâmetros


.pull-left[

Devemos adicionar os parâmetros (e algum valor padrão) no YAML. 

Ex:


```
---
title: "Relatório com Parâmentros"
author: "Beatriz"
date: "Fevereiro de 2022"
output: html_document
params:
  mes: 12
  ano: 2021
---
```
]


.pull-right[

Para acessar os parâmetros, usamos: `params$nome_parametro`.

Ex: `params$mes` para acessar o mês, ou `params$ano`.


Recomendação de leitura: [R Markdown: The Definitive Guide - Chapter 15 Parameterized reports](https://bookdown.org/yihui/rmarkdown/parameterized-reports.html)

]


---
class: teoria

### Extra: Adicionar equações
  
- Equação centralizada: Envolver a equação por dois `$`.

`$${\text{Média}=\frac {a_{1}+a_{2}+\cdots +a_{n}}{n}}$$`

  - Equação junto ao texto: Envolver a equação por um `$`.

&gt; Ou também na linha `\({\text{Média}=\frac {a_{1}+a_{2}+\cdots +a_{n}}{n}}\)`, junto ao texto!

**Código Markdown:**


```md
$${\text{Média}=\frac {a_{1}+a_{2}+\cdots +a_{n}}{n}}$$
```

.small[Dica: [Equações em LaTeX no Mettzer](https://app.mettzer.com/latex), ou pesquise no google por "Equações em LaTeX".]

---
class: teoria

### Extra: Adicionar referências

TO DO!

- https://www.zotero.org/

- https://retorque.re/zotero-better-bibtex/installation/


---
class: revisao

### Revisão - R Markdown

- ....


- ....

- ....


---
name: git-e-github
class: middle, center, inverse


## Git e GitHub

.left[
- O que vamos aprender:

  - O que é controle de versão de arquivos?
  
  - O que é Git? O que é GitHub?
  
  - Como configurar de forma que possamos usar o Git e GitHub diretamente do RStudio?
  
  - Como disponibilizar um documento que fiz em RMarkdown na internet, usando o GitHub?

]


---
class: teoria

### Git

- Git é um **sistema de versionamento**, criado por Linus Torvalds, autor do Linux.

- É capaz de guardar o histórico de alterações de todos os arquivos dentro de uma pasta, que chamamos de repositório.

- Funciona como o "*Track changes*" do word, mas muito melhor.

- Torna-se importante à medida que seu trabalho é __colaborativo__.

- Git é um software que você instala no computador.

&lt;img src="img/git.png" width="30%" style="display: block; margin: auto;" /&gt;


.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]


---
class: teoria

### GitHub

- GitHub é um site onde você coloca e compartilha repositórios Git.

- Utilizado por milhões de pessoas em projetos de código aberto ou fechado.

- Útil para colaborar com outros programadores em projetos de ciência de dados.

- Existem alternativas, como [GitLab](https://about.gitlab.com/) e [BitBucket](https://bitbucket.org/product).

- GitHub é um site que você acessa na internet.

&lt;br&gt;

&lt;img src="img/github.png" width="30%" style="display: block; margin: auto;" /&gt;

.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]

---

class: teoria


### Configurando o Git e GitHub no RStudio



####  Usando protocolo https

- ⬜ Ter o pacote `usethis` instalado 

- ⬜ Se apresentar para o `git` 

- ⬜ Criar um GitHub Token/PAT

- ⬜ Armazenar o GitHub Token/PAT 

- ⬜ Reiniciar o RStudio


.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]



---

class: teoria

### Configurando o Git e GitHub no RStudio


#### Usando protocolo ssh

- ⬜ Todas as etapas para o protocolo https (listadas no slide anterior)

- ⬜ Criar as chaves SSH no RStudio

- ⬜ Adicionar a chave ssh no ssh-agent

- ⬜ Adicionar as chaves públicas no  GitHub

- ⬜ Alterar o protocolo padrão no arquivo `.Rprofile`

- ⬜ Reiniciar o RStudio



Obs: Se você utiliza Linux, recomendamos usar `ssh`.



.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]


---

class: teoria

### Configure seu usuário do Git

Antes de começarmos a versionar o código do nosso projeto, vamos configurar o Git e o GitHub no RStudio. 

Esse processo precisa ser feito apenas uma vez!

```
usethis::use_git_config(
  user.name = "SEU NOME NO GITHUB",
  user.email = "seu_email_no@github.com"
)
```

- Em `user.name`, pode ser seu nome mesmo, não precisa ser o nickname.

- O `user.email` precisa ser o que está vinculado à sua conta do GitHub.

---

class: teoria

### Configure o Personal Access Token 

- Ao conectar com o GitHub, você será instruída(o) a criar um *Personal Access Token* (PAT).

- O PAT serve para autenticar ao GitHub, podendo ser utilizado como senha de acesso ou internamente para automatizar tarefas (como criar um repositório).

- Para criar um novo PAT, use a função `usethis::create_github_token()`. Uma janela do navegador será aberta, e você deve autenticar no GitHub (se necessário), criar o novo token, e copiá-lo. 


```r
usethis::create_github_token()
```


.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]


---

class: teoria

### Armazenar o Personal Access Token 

#### Método 1 - `gitcreds::gitcreds_set()`


.pull-left[

```r
gitcreds::gitcreds_set()
# -&gt; Your current credentials for 'https://github.com':
#   protocol: https
#   host    : github.com
#   username: beatrizmilz
#   password: &lt;-- hidden --&gt;
#     
# -&gt; What would you like to do? 
# 1: Keep these credentials
# 2: Replace these credentials
# 3: See the password / token
```
]


.pull-right[
Siga as instruções e cole o PAT quando for solicitado as credenciais.


```r
# -&gt; Adding new credentials...
# -&gt; Removing credetials from cache...
# -&gt; Done.
```
]



.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]



---

class: teoria

#### Método 2 - Armazenar manualmente no `.Renviron`

- Use a função `usethis::edit_r_environ()` para abrir o arquivo `.Renviron` para salvar seu token. 


```r
usethis::edit_r_environ()
# ● Modify 'C:/Users/beatr/Documents/.Renviron'
# ● Restart R for changes to take effect
```

- Crie uma nova linha na forma `GITHUB_PAT=SEU_TOKEN`, adicione o token, **pule uma linha** e salve o arquivo. Se certifique que o arquivo termina com uma linha vazia!


Use essa estrutura, substituindo os 0 pelo código copiado na etapa anterior:


```r
GITHUB_PAT="0000000000000000000000000000000000000000"
```



.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]


---

class: teoria

### Git Situation Report

- Utilize a função `usethis::git_sitrep()` e leia o resultado que aparece no console. A mensagem abaixo foi cortada para mostrar os trechos de interesse!


```r
usethis::git_sitrep()
#&gt; Git config (global)
#&gt; ● Name: 'SEU NOME DEVE APARECER AQUI'
#&gt; ● Email: 'SEU EMAIL DEVE APARECER AQUI'

#&gt; GitHub
#&gt; ● Default GitHub host: 'https://github.com'
#&gt; ● Personal access token for 'https://github.com': '&lt;discovered&gt;' ***IMPORTANTE ESTAR COMO DISCOVERED***
#&gt; ● GitHub user: 'SEU NOME DE USUÁRIO(A) DEVE APARECER AQUI'
#&gt; ● Token scopes: 'gist, repo, user, workflow'
#&gt; ● Email(s): 'SEU EMAIL DEVE APARECER AQUI'
```

.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]


---

class: teoria

### Configurando com o SSH (Parte 1)



.pull-left[

- Se você utiliza Linux, recomendamos usar o protocolo `ssh`.

- Além das etapas anteriores (se apresentar para o `git` e configurar o PAT), é necessário seguir os seguintes passos: 

** CRIANDO UMA CHAVE SSH**

- No RStudio, clique em `Tools` -&gt; `Global Options...` -&gt; `Git/SVN`. No campo `SSH RSA Key`, clique em `Create RSA Key`.



Referência: https://happygitwithr.com/ssh-keys.html 

]

.pull-right[

&lt;img src="img/ssh/etapa-1.png" width="90%" style="display: block; margin: auto;" /&gt;

]




.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]


---

class: teoria

### Configurando com o SSH (Parte 2)


.pull-left[

** CRIANDO UMA CHAVE SSH**

- Não altere o primeiro campo, mas você pode adicionar uma senha caso queira. Porém você precisará informar essa senha todas as vezes que quiser fazer algumas ações como Pull ou Push. Clique em `Create`.

A sua senha será criada e aparecerá uma caixinha com ela. Pode clicar em `Close`.

Após fechar, veja se o campo `SSA RSA KEY` está preenchido.

Referência: https://happygitwithr.com/ssh-keys.html 

]

.pull-right[


&lt;img src="img/ssh/etapa-2.png" width="90%" style="display: block; margin: auto;" /&gt;

]

.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]



---


class: teoria

### Configurando com o SSH (Parte 3)


.pull-left[

**Verificando se o ssh-agent está funcionando**





Referência: https://happygitwithr.com/ssh-keys.html#add-key-to-ssh-agent

]

.pull-right[

- **Mac OS ou Linux** - no terminal, escreva:

```
eval "$(ssh-agent -s)"
```


- **Windows** - no Git Bash shell, escreva:

```
eval $(ssh-agent -s)
```



&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
A resposta esperada, nessa etapa, é algo como:
```
Agent pid 14198
```


]


.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]



---


class: teoria

### Configurando com o SSH (Parte 4)


.pull-left[

**Adicionando a chave ssh no ssh-agent**

- Se você definiu uma senha ao criar a chave ssh, ela será solicitada nessa etapa.


- **Linux** - no terminal, escreva:

```
ssh-add ~/.ssh/id_rsa
```


- **Mac OS** - no terminal, escreva:

```
ssh-add -K ~/.ssh/id_rsa
```


- **Windows** - no Git Bash shell, escreva:

```
ssh-add ~/.ssh/id_rsa
```
&lt;br&gt;

Referência: https://happygitwithr.com/ssh-keys.html#add-key-to-ssh-agent

]

.pull-right[

A resposta esperada, nessa etapa, é algo como:
```
Identity added: /home/bea/.ssh/id_rsa
```

&lt;img src="img/ssh/etapa-5.png" width="100%" style="display: block; margin: auto;" /&gt;

]


.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]



---


class: teoria

### Configurando com o SSH (Parte 5)



**Adicionando a chave pública no GitHub**

- No GitHub, vá em `Settings` -&gt; `SSH and GPG keys` -&gt; `New ssh key` (ou clique aqui: https://github.com/settings/ssh/new )  


- No RStudio, clique em `Tools` -&gt; `Global Options...` -&gt; `Git/SVN`. No campo `SSH RSA Key`, clique em `View Public Key`.

- Uma janela vai abrir com a chave pública e você deve copiar o conteúdo todo.

- No campo `Title`, escreva algo que ajude você a lembrar em qual computador essa chave está sendo usada. No campo `Key`, cole todo o conteúdo copiado na etapa anterior. Clique em `Add SSH key`.



&lt;br&gt;

Referência: https://happygitwithr.com/ssh-keys.html#add-key-to-ssh-agent


.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]



---


class: teoria

### Configurando com o SSH (Parte 6)



**Dicas**


- Confira se está funcionando executando o seguinte código na aba Terminal, no RStudio: 
```
ssh -T git@github.com
```

- Ao clonar um projeto, é importante utilizar o protocolo que foi configurado. O protocolo padrão utilizado pelo usethis é o `https`. Para alterar para o `ssh` , altere no `.Rprofile` o protocolo padrão a ser utilizado: 

  - Abrir o arquivo o `.Rprofile`: 
  
```
usethis::edit_r_profile()
```

  - Adicione a seguinte linha neste arquivo:
  
```
options(usethis.protocol = "ssh")
```

  - Salve o arquivo e reinicie o RStudio.


&lt;br&gt;

Referência: https://usethis.r-lib.org/reference/git_protocol.html

.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]


---

class: teoria

### Versione com o Git e o GitHub



- Rodando o comando acima na pasta do projeto (a nova aba do RStudio que
apareceu) você adiciona controle de versão.

- Você receberá algumas instruções para seguir, mas está tudo certo.



- O comando acima sincroniza a pasta com o GitHub.

- Mais uma vez, você receberá algumas instruções, mas lembre-se  de alterar para o protocolo `ssh` caso tenha feito a configuração usando esse protocolo. Para isso, use o argumento `protocol = ssh`.

.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]


---

class: teoria

### Resumo

1. Repositório: Criar projeto/pacote

2. Adicionar Git

3. Adicionar GitHub

4. Commit: Edite e "Commite" as mudanças no código

5. Push: Suba os commits para o GitHub

6. Pull (extra): Baixe o estado atual do projeto

### Cuidados

- Se uma base de dados tem mais do que 50Mb de tamanho, ela não deveria estar no seu repositório.

- Nem sempre o comando Pull dá certo. Às vezes, você e a colega de trabalho fizeram mudanças no mesmo arquivo e, quando vão juntar, ocorre um conflito.

.topnote[&lt;i class="far fa-flag"&gt;&lt;/i&gt; [Slide](https://curso-r.github.io/main-pacotes/slides/index.html) adaptado do curso de [Pacotes](https://curso-r.com/cursos/pacotes/), da [Curso-R](https://curso-r.com/).]


---
class: revisao

### Revisão - Git e GitHub

- ....


- ....

- ....


---
class: center

## Agradecemos a atenção!


Lembre-se de enviar as dúvidas no [discourse da Curso-R](https://discourse.curso-r.com/)!

Slides criados usando os pacotes em R  📦 :

[**xaringan**](https://github.com/yihui/xaringan)&lt;br&gt;
[gadenbuie/xaringanthemer](https://github.com/gadenbuie/xaringanthemer)

O chakra vem da biblioteca javascript [remark.js](https://remarkjs.com), e os pacotes  [**knitr**](http://yihui.name/knitr), e [R Markdown](https://rmarkdown.rstudio.com).


&lt;!-- inicio font awesome --&gt;
&lt;script src="https://kit.fontawesome.com/1f72d6921a.js" crossorigin="anonymous"&gt;&lt;/script&gt;

&lt;!-- final font awesome --&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "<a href='https://beatrizmilz.github.io/2022-curso-de-verao-ime-usp-relatorios/'><i class='fas fa-external-link-alt'></i> Página do curso</a> - <a href='#sumario'>Guia</a> - %current%/%total%",
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
